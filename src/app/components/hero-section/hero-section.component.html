<section id="inicio" class="hero">
  <div class="container">
    <div class="hero__content">
      <div class="hero__text">
        <h1 class="hero__title animate-fade-in-up text-balance">
          De <span class="text-primary">reprimida</span> a
          <span class="text-secondary">liberada en 90 días</span>
          a través del antídoto al bloqueo emocional
        </h1>

        <p class="hero__subtitle text-pretty">
          Un viaje de sanación para soltar cargas heredadas y reconectar contigo misma
        </p>

        <div class="offer-strip" role="region" aria-label="Oferta especial">
          <div class="offer-strip__header">Oferta especial</div>
          <p class="offer-strip__copy">
            ¡Inscríbete ahora y accede <strong>100% gratis</strong> a la masterclass
            <em>“De reprimida a liberada en 90 días”</em>!
          </p>

          <button
            class="offer-strip__cta hero__cta hero__cta--primary"
            type="button"
            (click)="toggleSignup()"
            [attr.aria-expanded]="showSignup ? 'true' : 'false'"
            [attr.aria-controls]="'signup-form'">
            {{ showSignup ? 'Ocultar formulario' : 'Inscribirme ahora' }}
          </button>
        </div>
      </div>

     <!-- Contenedor del carrusel -->
<div class="hero__image"
     role="region"
     aria-roledescription="carousel"
     aria-label="Galería de imágenes de la sección hero"
     (mouseenter)="onMouseEnter()"
     (mouseleave)="onMouseLeave()">

  <div class="hero__image-container">

    <!-- Slides -->
    <div class="hero__slides">
      <img
        *ngFor="let img of images; let i = index"
        [src]="img.src"
        [alt]="img.alt"
        class="hero__image-img"
        [class.is-active]="current() === i"
        [attr.aria-hidden]="current() === i ? 'false' : 'true'"
        decoding="async"
        loading="eager"
      />
    </div>

    <!-- Controles (opcionales) -->
    <button class="hero__ctrl hero__ctrl--prev" type="button" (click)="prev()" aria-label="Imagen anterior">
      ‹
    </button>
    <button class="hero__ctrl hero__ctrl--next" type="button" (click)="next()" aria-label="Siguiente imagen">
      ›
    </button>

    <!-- Indicadores -->
    <div class="hero__dots" role="tablist" aria-label="Indicadores de carrusel">
      <button
        *ngFor="let _ of images; let i = index"
        class="hero__dot"
        type="button"
        role="tab"
        [attr.aria-selected]="current() === i"
        [class.is-active]="current() === i"
        (click)="goTo(i)"
        [attr.aria-label]="'Ir a la imagen ' + (i + 1)">
      </button>
    </div>

  </div>
</div>
    </div>

    <!-- Formulario -->
    <div id="signup-form" *ngIf="showSignup" style="margin-top: 1.5rem;">
      <app-masterclass-signup
        (submitted)="onSignupSubmitted()"
        (submittedName)="onSignupSubmittedName($event)">
      </app-masterclass-signup>
    </div>
  </div>
</section>

<!-- Modal de bienvenida -->
<app-masterclass-welcome-modal
  [open]="showWelcome"
  [masterclassRoute]="masterclassRoute"
  [nombre]="welcomeName"
  (closed)="closeWelcome()">
</app-masterclass-welcome-modal>
